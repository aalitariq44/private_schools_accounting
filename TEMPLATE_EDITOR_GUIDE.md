# تطوير محرر القالب المرئي لهويات الطلاب - دليل المستخدم

## الميزات الجديدة المضافة

### 1. معاينة لحظية
- **المعاينة التفاعلية**: يتم تحديث المعاينة تلقائياً عند تعديل أي عنصر
- **التحكم في المعاينة**: إمكانية تكبير وتصغير وملء الشاشة للمعاينة
- **معاينة HTML**: معاينة سريعة باستخدام محرك الويب الحديث
- **معاينة PDF**: إنشاء ملف PDF كامل للمعاينة والطباعة

### 2. تصميم مبسط وحديث
- **ألوان عصرية**: نظام ألوان هادئ وأنيق
- **تخطيط مبسط**: تقليل عدد العناصر والتركيز على المعلومات الأساسية
- **خطوط محسّنة**: أحجام وأوزان خطوط متناسقة
- **مساحات متوازنة**: توزيع العناصر بشكل أفضل

### 3. واجهة محسّنة
- **تقسيم الشاشة**: محرر العناصر على اليسار ومعاينة على اليمين
- **أسماء عربية**: ترجمة أسماء العناصر للعربية
- **أنماط حديثة**: واجهة عصرية وجذابة
- **أيقونات**: إضافة أيقونات للأزرار لسهولة التعرف

## كيفية الاستخدام

### فتح المحرر
1. اذهب إلى صفحة **هويات الطلاب**
2. انقر على **إدارة القوالب**
3. اختر **محرر القوالب المرئي**

### تعديل العناصر
1. اختر العنصر من التبويبات على اليسار
2. قم بتعديل الإعدادات (الموقع، الحجم، الألوان، النص)
3. شاهد التغييرات فورياً في المعاينة على اليمين

### حفظ التغييرات
- **تطبيق**: لحفظ التغييرات مؤقتاً
- **موافق**: لحفظ وإغلاق المحرر
- **حفظ القالب**: لحفظ القالب في ملف JSON

### المعاينة والتصدير
- **معاينة PDF**: إنشاء ملف PDF للمعاينة الكاملة
- **تصدير PDF**: تصدير القالب مع عدة أمثلة للطباعة
- **تحديث المعاينة**: تحديث المعاينة اللحظية يدوياً

## التحسينات في التصميم

### العناصر المحذوفة (للتبسيط)
- تسميات منفصلة لكل عنصر
- خطوط وعناصر زائدة
- ألوان متضاربة

### العناصر المحسّنة
- **العنوان**: في المنتصف بخط كبير وأنيق
- **اسم المدرسة**: تحت العنوان مباشرة
- **الصورة**: مربع نظيف مع إطار رفيع
- **المعلومات**: ترتيب منطقي وخطوط متناسقة
- **QR كود**: أصغر حجماً وأكثر أناقة

### نظام الألوان الجديد
- **الأزرق الهادئ**: للعناوين والخطوط المهمة
- **الرمادي الناعم**: للنصوص الثانوية
- **الأبيض والرمادي الفاتح**: للخلفيات والمربعات

## نصائح للاستخدام الأمثل

### 1. الألوان
- استخدم الألوان الهادئة للمظهر المهني
- تجنب الألوان الزاهية التي قد تشتت الانتباه
- حافظ على التباين الجيد للقراءة الواضحة

### 2. الخطوط
- استخدم أحجام خطوط متدرجة (العنوان > اسم الطالب > المعلومات الأخرى)
- تجنب الخطوط الصغيرة جداً التي قد تكون صعبة القراءة
- استخدم الخط العريض للمعلومات المهمة فقط

### 3. التخطيط
- اترك مساحات كافية بين العناصر
- تأكد من أن جميع العناصر داخل حدود البطاقة
- حافظ على التوازن البصري

### 4. الاختبار
- استخدم المعاينة اللحظية للتحقق من التغييرات
- اطبع نسخة تجريبية للتأكد من الجودة
- اختبر مع أسماء طويلة وقصيرة

## الملفات المحسّنة

### 1. محرر القالب (`ui/dialogs/template_editor.py`)
- إضافة المعاينة اللحظية
- تحسين الواجهة والأنماط
- إضافة وظائف جديدة للتصدير

### 2. قالب الهوية (`templates/id_template.py`)
- تبسيط التصميم
- تحسين الألوان والتخطيط
- إزالة العناصر الزائدة

### 3. صفحة الهويات (`ui/pages/student_ids/student_ids_page.py`)
- تحسين معالجة الأخطاء
- رسائل أوضح للمستخدم

## المتطلبات التقنية

### مكتبات إضافية
- `PyQt5.QtWebEngineWidgets` للمعاينة اللحظية
- `reportlab` لإنشاء ملفات PDF
- `arabic_reshaper` و `python-bidi` لدعم النصوص العربية

### الملفات المطلوبة
- قوالب HTML للمعاينة
- خطوط عربية (Cairo, Amiri)
- ملفات CSS للتنسيق

## استكشاف الأخطاء

### مشاكل المعاينة
- تأكد من وجود `QWebEngineView`
- تحقق من صحة HTML المولد
- أعد تشغيل التطبيق إذا لزم الأمر

### مشاكل الخطوط
- تأكد من وجود ملفات الخطوط العربية
- تحقق من مسار ملفات الخطوط
- استخدم الخطوط الافتراضية كبديل

### مشاكل الألوان
- تأكد من صحة قيم RGB (0-1)
- استخدم الألوان المحددة مسبقاً
- تجنب القيم السالبة أو الأكبر من 1

## الخلاصة

تم تطوير محرر القالب المرئي ليوفر:
- **تجربة أفضل**: معاينة لحظية وواجهة حديثة
- **تصميم أجمل**: ألوان هادئة وتخطيط مبسط
- **سهولة الاستخدام**: أدوات بديهية ونتائج فورية
- **مرونة عالية**: إمكانية تخصيص جميع العناصر
- **جودة احترافية**: نتائج قابلة للطباعة بجودة عالية

هذا التحديث يجعل إنشاء وتعديل هويات الطلاب أسرع وأسهل وأكثر دقة.
