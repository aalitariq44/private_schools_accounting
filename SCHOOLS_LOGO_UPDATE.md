# تحديث صفحة المدارس - إضافة عرض الشعارات

## ملخص التحديث

تم تحديث صفحة المدارس لتشمل عرض شعار كل مدرسة في الجدول بشكل مرتب ومنظم.

## التحسينات المضافة

### 1. إضافة عمود الشعار
- تم إضافة عمود جديد بعنوان "الشعار" في جدول المدارس
- يظهر العمود بين عمود "المعرف" و "الاسم بالعربية"
- عرض العمود مثبت على 80 بكسل لضمان العرض المتناسق

### 2. عرض الشعارات
- **إذا كان للمدرسة شعار:** يتم عرض الشعار بحجم 50x50 بكسل مع الحفاظ على النسبة
- **إذا لم يكن للمدرسة شعار:** يتم عرض الشعار الافتراضي من المسار `C:\Users\pc\Desktop\private_schools_accounting\app\resources\images\logo.png`
- **في حالة وجود خطأ:** يتم عرض نص "لا يوجد شعار" مع تنسيق مناسب

### 3. تحسينات التصميم
- زيادة ارتفاع الصفوف إلى 60 بكسل لاستيعاب الشعارات
- إضافة إطار وخلفية لطيفة لويدجت الشعار
- تحجيم تلقائي للشعارات مع الحفاظ على الجودة

### 4. التحديثات التقنية
- تم تحديث استعلام قاعدة البيانات لتشمل حقل `logo_path`
- إضافة دالة `create_logo_widget()` لإنشاء ويدجت عرض الشعار
- تحديث دالة البحث لتتجاهل عمود الشعار في عملية البحث
- تحديث ترقيم الأعمدة في جميع العمليات

## الملفات المُحدثة

### ui/pages/schools/schools_page.py
- إضافة استيراد `config` للوصول للمسارات
- إضافة استيراد `os` و `Path` للتعامل مع الملفات
- تحديث قائمة أعمدة الجدول لتشمل "الشعار"
- إضافة دالة `create_logo_widget()` جديدة
- تحديث دالة `load_schools()` لعرض الشعارات
- تحديث دالة `filter_schools()` لتتوافق مع العمود الجديد
- تحديث إعدادات حجم الأعمدة وارتفاع الصفوف

## كيفية الاستخدام

1. **تشغيل التطبيق العادي:**
   ```bash
   python main.py
   ```

2. **اختبار صفحة المدارس فقط:**
   ```bash
   python test_schools_with_logos.py
   ```

## المواصفات التقنية

### عمود الشعار
- **الموقع:** العمود الثاني (index 1)
- **العرض:** 80 بكسل (ثابت)
- **حجم الشعار:** 50x50 بكسل
- **التحجيم:** مع الحفاظ على النسبة (`Qt.KeepAspectRatio`)
- **جودة التحجيم:** تحجيم ناعم (`Qt.SmoothTransformation`)

### الشعار الافتراضي
- **المسار:** `app/resources/images/logo.png`
- **الاستخدام:** عندما لا يوجد شعار للمدرسة أو الملف غير موجود
- **المتاح عبر:** `config.RESOURCES_DIR / "images" / "logo.png"`

### معالجة الأخطاء
- التحقق من وجود الملف قبل التحميل
- عرض رسالة مناسبة في حالة فشل تحميل الشعار
- تسجيل الأخطاء في ملف اللوغ

## اختبار التحديث

لاختبار التحديث:

1. تأكد من وجود بيانات مدارس في قاعدة البيانات
2. شغل التطبيق وانتقل لصفحة المدارس
3. تحقق من ظهور عمود الشعار
4. تحقق من عرض الشعار الافتراضي للمدارس التي لا تملك شعار
5. اختبر البحث للتأكد من عمله بشكل صحيح

## متطلبات النظام

- Python 3.7+
- PyQt5
- قاعدة بيانات SQLite مع جدول schools يحتوي على حقل logo_path
- وجود الشعار الافتراضي في المسار المحدد

## ملاحظات

- يتم عرض الشعار الافتراضي تلقائياً للمدارس التي لا تملك شعار مخصص
- حجم عمود الشعار ثابت لضمان التنسيق المتناسق
- البحث يتجاهل عمود الشعار ويبحث في الأعمدة النصية فقط
