# ميزة إضافة مجموعة الطلاب

## الوصف
تم إضافة ميزة جديدة لإضافة مجموعة من الطلاب يتشاركون في نفس المعلومات الأساسية مثل المدرسة والصف والشعبة والرسوم الدراسية.

## المميزات

### 1. واجهة المستخدم
- **نافذة منظمة**: تنقسم إلى قسمين رئيسيين:
  - قسم المعلومات المشتركة في الأعلى
  - قسم بيانات الطلاب في الأسفل

### 2. المعلومات المشتركة
يمكن للمستخدم إدخال المعلومات التالية مرة واحدة لجميع الطلاب:
- **اسم المدرسة**: اختيار من قائمة المدارس المسجلة
- **الصف**: اختيار من قائمة الصفوف المتاحة
- **الشعبة**: إدخال نصي (مثل: أ، ب، ج)
- **الرسوم الدراسية**: مبلغ بالدينار العراقي
- **تاريخ المباشرة**: يتم تعيين تاريخ اليوم افتراضياً
- **الحالة**: اختيار من (نشط، منقطع، متخرج، محول)
- **الجنس**: اختيار من (ذكر، أنثى)

### 3. إدارة الطلاب
- **جدول تفاعلي**: يعرض قائمة الطلاب مع الحقول:
  - اسم الطالب
  - رقم الهاتف
  - زر حذف لكل طالب
- **إضافة طلاب**: زر "+" لإضافة طالب جديد
- **عداد الطلاب**: يعرض عدد الطلاب الحالي
- **حذف انتقائي**: إمكانية حذف أي طالب من القائمة

### 4. التحقق من البيانات
- التأكد من اختيار المدرسة
- التأكد من إدخال الشعبة
- التأكد من وجود رسوم دراسية صالحة
- التأكد من إدخال اسم واحد على الأقل
- التحقق من عدم ترك أسماء فارغة

## كيفية الاستخدام

### 1. الوصول للميزة
- من صفحة الطلاب الرئيسية
- انقر على زر "إضافة مجموعة طلاب" (لونه أخضر)

### 2. إدخال البيانات
1. اختر المدرسة من القائمة المنسدلة
2. اختر الصف المناسب
3. أدخل الشعبة
4. حدد الرسوم الدراسية
5. اختر أو عدل تاريخ المباشرة
6. اختر الحالة والجنس

### 3. إضافة الطلاب
1. أدخل اسم الطالب الأول في الجدول
2. أدخل رقم الهاتف (اختياري)
3. انقر على "+" لإضافة طالب آخر
4. كرر العملية حسب الحاجة
5. يمكن حذف أي طالب بالنقر على زر "حذف"

### 4. الحفظ
- انقر على "حفظ المجموعة" بعد الانتهاء
- سيتم عرض رسالة تأكيد بعدد الطلاب المضافين
- سيتم تحديث قائمة الطلاب تلقائياً

## الملفات المضافة/المعدلة

### ملفات جديدة:
- `ui/pages/students/add_group_students_dialog.py`: نافذة إضافة مجموعة الطلاب
- `test_group_students.py`: اختبار النافذة
- `test_group_students.bat`: ملف تشغيل الاختبار

### ملفات معدلة:
- `ui/pages/students/students_page.py`: إضافة زر والوظائف المطلوبة

## التحسينات والميزات

### 1. تصميم متجاوب
- استخدام QScrollArea للواجهات الطويلة
- تنسيق عربي مناسب
- ألوان متناسقة مع باقي النظام

### 2. سهولة الاستخدام
- واجهة بديهية وواضحة
- رسائل خطأ مفيدة
- تحديث تلقائي للعدادات

### 3. الأمان والموثوقية
- التحقق من صحة البيانات
- معالجة الأخطاء بشكل صحيح
- تسجيل العمليات في النظام

## اختبار الميزة

```bash
# تشغيل الاختبار
python test_group_students.py

# أو استخدام ملف batch
test_group_students.bat
```

## ملاحظات للمطورين

### قاعدة البيانات
- يتم الحفظ في جدول `students`
- جميع الحقول المطلوبة متوفرة
- العلاقات مع جدول `schools` محفوظة

### الأداء
- لا توجد قيود على عدد الطلاب في المجموعة
- حفظ تدريجي مع معالجة الأخطاء
- تحديث واحد لواجهة المستخدم

### التوسعات المستقبلية
- إمكانية استيراد من ملف Excel
- تصدير قالب فارغ
- إضافة المزيد من التحققات
- دعم الصور للطلاب في المجموعة
