
<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>تقرير الطالب</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            direction: rtl;
        }
        .header {
            text-align: center;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .student-info {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .footer {
            text-align: center;
            margin-top: 50px;
            font-size: 12px;
            color: #666;
        }
        /* Table styling for borders */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>{{ company_name }}</h1>
        <h2>تقرير الطالب</h2>
        <p>تاريخ الطباعة: {{ print_date | date_ar }}</p>
    </div>
    
    <h3>بيانات الطالب</h3>
    <table class="student-table">
        <tbody>
            <tr><th>الاسم</th><td>{{ student.name }}</td></tr>
            <tr><th>المدرسة</th><td>{{ student.school_name }}</td></tr>
            <tr><th>الصف</th><td>{{ student.grade }}</td></tr>
            <tr><th>الشعبة</th><td>{{ student.section }}</td></tr>
            <tr><th>الجنس</th><td>{{ student.gender }}</td></tr>
            <tr><th>الهاتف</th><td>{{ student.phone }}</td></tr>
            <tr><th>الحالة</th><td>{{ student.status }}</td></tr>
            <tr><th>الرسوم الدراسية</th><td>{{ student.total_fee | currency }}</td></tr>
        </tbody>
    </table>
    
    {# الأقساط المدفوعة #}
    {% if installments %}
    <div class="installments-section">
        <h3>الأقساط المدفوعة</h3>
        <table>
            <thead>
                <tr>
                    <th>المبلغ</th><th>تاريخ الدفع</th><th>وقت الدفع</th><th>ملاحظات</th>
                </tr>
            </thead>
            <tbody>
                {% for inst in installments %}
                <tr>
                    <td>{{ inst.amount | currency }}</td>
                    <td>{{ inst.payment_date | date_ar }}</td>
                    <td>{{ inst.payment_time }}</td>
                    <td>{{ inst.notes }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
    
    {# الملخص المالي #}
    {% if financial_summary %}
    <h3>الملخص المالي</h3>
    <table class="summary-table">
        <thead>
            <tr><th>البند</th><th>القيمة</th></tr>
        </thead>
        <tbody>
            <tr><td>عدد الأقساط</td><td>{{ financial_summary.installments_count }}</td></tr>
            <tr><td>إجمالي الأقساط</td><td>{{ financial_summary.installments_total | currency }}</td></tr>
            <tr><td>المتبقي من الرسوم الدراسية</td><td>{{ financial_summary.school_fee_remaining | currency }}</td></tr>
            <tr><td>عدد الرسوم الإضافية</td><td>{{ financial_summary.additional_fees_count }}</td></tr>
            <tr><td>إجمالي الرسوم الإضافية</td><td>{{ financial_summary.additional_fees_total | currency }}</td></tr>
            <tr><td>المدفوعة من الرسوم الإضافية</td><td>{{ financial_summary.additional_fees_paid_total | currency }}</td></tr>
            <tr><td>المتبقية من الرسوم الإضافية</td><td>{{ financial_summary.additional_fees_unpaid_total | currency }}</td></tr>
        </tbody>
    </table>
    {% endif %}
    
    {# الرسوم الإضافية #}
    {% if additional_fees %}
    <div class="fees-section">
        <h3>الرسوم الإضافية</h3>
        <table>
            <thead>
                <tr>
                    <th>نوع الرسم</th>
                    <th>المبلغ</th>
                    <th>تاريخ الدفع</th>
                    <th>تاريخ الإضافة</th>
                    <th>ملاحظات</th>
                </tr>
            </thead>
            <tbody>
                {% for fee in additional_fees %}
                <tr>
                    <td>{{ fee.fee_type }}</td>
                    <td>{{ fee.amount | currency }}</td>
                    <td>{{ fee.payment_date | date_ar }}</td>
                    <td>{{ fee.created_at | date_ar }}</td>
                    <td>{{ fee.notes }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
    
    <div class="footer">
        <p>{{ company_name }} - {{ system_version }}</p>
    </div>
</body>
</html>
        