# ميزة كلمة مرور التطبيق المحمول

## نظرة عامة
تم إضافة ميزة جديدة تتيح تعيين كلمة مرور خاصة للوصول إلى بيانات المؤسسة من التطبيق المحمول.

## الهدف من الميزة
- السماح للتطبيق المحمول بالوصول الآمن إلى بيانات المؤسسة
- تخزين كلمة المرور بشكل آمن على Supabase
- إمكانية إدارة (إضافة/تعديل/حذف) كلمة المرور من التطبيق الرئيسي

## كيفية استخدام الميزة

### 1. الوصول إلى إعدادات كلمة المرور
1. افتح التطبيق الرئيسي
2. اذهب إلى صفحة "الإعدادات"
3. ستجد قسم "إعدادات التطبيق المحمول"
4. انقر على زر "إدارة كلمة المرور"

### 2. تعيين كلمة مرور جديدة
1. في النافذة المنبثقة، أدخل كلمة مرور جديدة
2. أعد كتابة كلمة المرور للتأكيد
3. انقر على "حفظ"
4. سيتم حفظ كلمة المرور محلياً وعلى Supabase

### 3. حذف كلمة المرور
1. في نافذة إدارة كلمة المرور
2. انقر على "حذف كلمة المرور"
3. أكد الحذف في الرسالة التي تظهر

## كيفية عمل النظام

### التخزين المحلي
- يتم حفظ كلمة المرور في جدول `app_settings` بالمفتاح `mobile_app_password`

### التخزين على Supabase
- يتم إنشاء ملف نصي يحتوي على كلمة المرور
- المسار: `mobile_access/{اسم_المؤسسة}/mobile_password.txt`
- يستخدم نفس اسم المجلد المُستخدم للنسخ الاحتياطية

### الوصول من التطبيق المحمول
يمكن للتطبيق المحمول الوصول للبيانات باستخدام:
- **اسم المؤسسة**: نفس الاسم المُستخدم في النسخ الاحتياطية
- **كلمة المرور**: المحفوظة في الملف النصي

## الأمان
- كلمة المرور تُحفظ كنص عادي (يُنصح بتحسين التشفير مستقبلاً)
- يُنصح بعدم مشاركة هذه المعلومات مع أشخاص غير مخولين
- يتطلب تعيين كلمة مرور أساسية للتطبيق قبل الوصول للإعدادات

## الملفات المتأثرة

### الملفات الجديدة
- `ui/dialogs/mobile_password_dialog.py` - نافذة إدارة كلمة المرور

### الملفات المُحدثة
- `core/utils/settings_manager.py` - إضافة دوال إدارة كلمة مرور التطبيق المحمول
- `ui/pages/settings/settings_page.py` - إضافة قسم التطبيق المحمول

## استخدام API

### من الكود
```python
from core.utils.settings_manager import settings_manager

# الحصول على كلمة المرور
password = settings_manager.get_mobile_password()

# تعيين كلمة مرور جديدة
success = settings_manager.set_mobile_password("كلمة_مرور_جديدة")

# أو استخدام الدوال المساعدة
from core.utils.settings_manager import get_mobile_password, set_mobile_password

password = get_mobile_password()
success = set_mobile_password("كلمة_مرور_جديدة")
```

## ملاحظات التطوير
- يمكن تحسين الأمان بإضافة تشفير لكلمة المرور
- يمكن إضافة ميزات إضافية مثل انتهاء صلاحية كلمة المرور
- يمكن إضافة سجل لعمليات الوصول من التطبيق المحمول

## التطوير المستقبلي
- إضافة تشفير AES لكلمة المرور
- إضافة ميزة انتهاء الصلاحية
- إضافة سجل للوصول والاستخدام
- إضافة ميزة إعادة تعيين كلمة المرور من التطبيق المحمول
