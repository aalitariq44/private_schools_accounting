# صفحة الإعدادات - دليل الاستخدام

## المميزات المضافة

تم إنشاء صفحة الإعدادات الجديدة والتي تتضمن الميزات التالية:

### 1. إعدادات العام الدراسي

- **اختيار العام الدراسي**: قائمة منسدلة تحتوي على الأعوام الدراسية من 2024-2025 إلى 2040-2041
- **حفظ العام الدراسي**: إمكانية حفظ العام الدراسي المحدد في قاعدة البيانات
- **التحديث التلقائي**: يتم تحميل العام الدراسي الحالي تلقائياً عند فتح الصفحة

### 2. إعدادات الأمان

- **تغيير كلمة المرور**: إمكانية تغيير كلمة مرور التطبيق
- **التحقق من كلمة المرور الحالية**: يجب إدخال كلمة المرور الحالية للتأكيد
- **تشفير آمن**: يتم تشفير كلمة المرور الجديدة بشكل آمن قبل الحفظ

## كيفية الوصول إلى صفحة الإعدادات

1. افتح التطبيق وسجل دخولك
2. من القائمة الجانبية، اضغط على "الإعدادات"
3. ستظهر صفحة الإعدادات مع جميع الخيارات المتاحة

## استخدام إعدادات العام الدراسي

### لتعيين العام الدراسي:
1. في قسم "إعدادات العام الدراسي"
2. اختر العام المطلوب من القائمة المنسدلة
3. اضغط "حفظ العام الدراسي"
4. ستظهر رسالة تأكيد عند النجاح

### ملاحظات هامة:
- العام الدراسي يُحفظ في جدول `app_settings` في قاعدة البيانات
- المفتاح المستخدم هو: `academic_year`
- يمكن للتطبيق الآخر الوصول لهذا الإعداد باستخدام هذا المفتاح

## استخدام تغيير كلمة المرور

### خطوات تغيير كلمة المرور:
1. في قسم "إعدادات الأمان"
2. اضغط على "تغيير كلمة المرور"
3. في النافذة المنبثقة:
   - أدخل كلمة المرور الحالية
   - أدخل كلمة المرور الجديدة
   - أكد كلمة المرور الجديدة
4. يمكنك تفعيل خيار "إظهار كلمات المرور" للتأكد من صحة الإدخال
5. اضغط "حفظ" لتأكيد التغيير

### متطلبات كلمة المرور:
- يجب أن تكون كلمة المرور 6 أحرف على الأقل (يمكن تغيير هذا من ملف `config.py`)
- يجب أن تكون كلمة المرور الجديدة مختلفة عن الحالية
- يتم تشفير كلمة المرور بشكل آمن باستخدام PBKDF2

## الملفات المضافة

### الملفات الجديدة:
1. `ui/pages/settings/__init__.py` - ملف تهيئة المجلد
2. `ui/pages/settings/settings_page.py` - صفحة الإعدادات الرئيسية
3. `ui/pages/settings/change_password_dialog.py` - حوار تغيير كلمة المرور

### الملفات المعدلة:
1. `app/main_window.py` - إضافة صفحة الإعدادات للنافذة الرئيسية

## قاعدة البيانات

### جدول الإعدادات:
تستخدم صفحة الإعدادات جدول `app_settings` الموجود مسبقاً والذي يحتوي على:
- `id`: معرف فريد
- `setting_key`: مفتاح الإعداد (مثل 'academic_year')
- `setting_value`: قيمة الإعداد
- `created_at`: تاريخ الإنشاء
- `updated_at`: تاريخ آخر تحديث

## التصميم والواجهة

- **تصميم متجاوب**: الصفحة تتكيف مع أحجام النوافذ المختلفة
- **ألوان متناسقة**: استخدام الألوان المتناسقة مع باقي التطبيق
- **خط عربي**: دعم كامل للخط العربي والاتجاه من اليمين لليسار
- **رسائل واضحة**: رسائل نجاح وخطأ واضحة للمستخدم

## الاختبار

لاختبار صفحة الإعدادات منفصلة:
```bash
python test_settings.py
```

لإعداد البيانات الأولية:
```bash
python setup_settings.py
```

## تطوير مستقبلي

يمكن إضافة المزيد من الإعدادات للصفحة مثل:
- إعدادات اللغة
- إعدادات الطباعة
- إعدادات النسخ الاحتياطي
- إعدادات الشكل والمظهر

## الدعم الفني

في حالة وجود أي مشاكل أو أسئلة، يُرجى مراجعة:
1. ملفات السجل في مجلد `logs/`
2. تأكد من وجود قاعدة البيانات والجداول المطلوبة
3. تأكد من صحة الاستيرادات في الكود
